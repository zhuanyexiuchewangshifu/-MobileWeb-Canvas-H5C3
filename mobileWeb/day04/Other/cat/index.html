<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>猫奴的一天</title>
  <link rel="stylesheet" href="./css/index.css">
  <script src="./js/swiper.min.js"></script>
</head>

<body>
  <!-- 手机滚动区域 -->
  <main>
    <!-- 顶部刘海 -->
    <!-- <i class="bangs"></i> -->

    <!-- 内容区域 -->
    <div class="content" style="max-width: 640px;height:100%;">
      <!-- <div class="gradient"></div> -->

        <h4 class="mn-title">猫奴一天的真实生活</h4>
        <a class="mn-author" href="http://www.wanlum.me"></a>
        <a class="mn-audio" href="javascript:;">
          <audio src="./music/audio.m4a" loop autoplay></audio>
        </a>
        <img class="mn-gradient" src="./images/gradient.png" alt="">
        <div class="swiper-container">
          <div class="swiper-wrapper">
            <div class="swiper-slide first">
              <!-- <img src="./images/zhiling1.jpg" width="100%" height="100%"> -->
              <div class="hello-Wrap">
                <img src="./images/first-hello.jpg" alt="">
              </div>
            </div>
            <div class="swiper-slide second">
              <!-- <img src="./images/zhiling2.jpg"> -->
            </div>
            <div class="swiper-slide third">
              <!-- <img src="./images/zhiling3.jpg"> -->
            </div>
            <div class="swiper-slide fourth">
              <!-- <img src="./images/zhiling4.jpg"> -->
            </div>
            <div class="swiper-slide fifth">
              <!-- <img src="./images/zhiling5.jpg"> -->
            </div>
            <div class="swiper-slide sixth">
              <!-- <img src="./images/zhiling6.jpg"> -->
            </div>
            <div class="swiper-slide seventh">
              <!-- <img src="./images/zhiling7.jpg"> -->
            </div>
          </div>
        </div>
    </div>
  </main>
  <!-- 广告区域 -->
  <aside></aside>
  <script>
    // 控制音频
    var audio = document.querySelector('audio');
    var mnAudio = document.querySelector('.mn-audio');

    mnAudio.onclick = function(){
      if(audio.paused) {
        audio.play()
      }else {
        audio.pause();
        // this.style.animation = '';
        // console.dir(this);
        this.style.animationName = '';
      }
    }

    var mySwiper = new Swiper('.swiper-container', {
      direction: 'vertical',
      mousewheel: true,
      watchSlidesProgress: true,
      on: {
        init: function () {
          this.myIndex = 0;//activeIndex在滑动到一半时会切换，改用滑动完再切换的myIndex
          console.log(1);
        },
        progress: function () {
          for (var i = 0; i < this.slides.length; i++) {
            var slide = this.slides.eq(i);
            var progress = this.slides[i].progress;
            var translate, boxShadow;
            translate = progress * this.height * 0.8;
            scale = 1 - Math.min(Math.abs(progress * 0.2), 1);
            if (i == this.myIndex) {
              slide.transform('translate3d(0,' + (translate) + 'px,0) scale(' + scale + ')');
              slide.css({ 'z-index': 0, 'boxShadow': '0px 0px 10px rgba(0,0,0,.5)' });
            }
          }

        },
        transitionStart: function () {
          console.log(this.myIndex);
        },
        transitionEnd: function () {
          console.log(3);
          this.myIndex = this.activeIndex;
          for (var i = 0; i < this.slides.length; i++) {
            var slide = this.slides.eq(i);
            slide.transform('');
            slide.css('z-index', 1);
          }
          this.mousewheel.enable();
        },
        setTransition: function (speed) {

          for (var i = 0; i < this.slides.length; i++) {
            var slide = this.slides.eq(i);
            slide.transition(speed + 'ms');
          }
          this.mousewheel.disable();
        }
      }
    });


  </script>
</body>

</html>